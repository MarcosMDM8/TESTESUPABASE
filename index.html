<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Teste Supabase</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>
  <h1>Cadastro no Supabase</h1>

  <input type="text" id="nome" placeholder="Nome" />
  <input type="email" id="email" placeholder="Email" />
  <button onclick="cadastrar()">Cadastrar</button>
  <button onclick="carregarUsuarios()">Ver Usuários</button>

  <ul id="lista"></ul>

  <script>
    const SUPABASE_URL = "https://idvbwnzcxmbujvfiuaji.supabase.co";
    const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlkdmJ3bnpjeG1idWp2Zml1YWppIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc0MjQ3NTYsImV4cCI6MjA2MzAwMDc1Nn0.iNF6zPgB2ob9s7AHTMy-4OAymr65lo0_qficwoS8SrI";

    const client = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    async function cadastrar() {
      const nome = document.getElementById("nome").value;
      const email = document.getElementById("email").value;

      const { data, error } = await client
        .from("SUPABASETESTE")
        .insert([{ nome, email }]);

      if (error) {
        console.error("Erro ao cadastrar:", error);
        alert("Erro ao cadastrar. Verifique o console.");
      } else {
        alert("Cadastro realizado com sucesso!");
        document.getElementById("nome").value = "";
        document.getElementById("email").value = "";
        carregarUsuarios();
      }
    }

    async function carregarUsuarios() {
      const lista = document.getElementById("lista");
      lista.innerHTML = "";

      const { data, error } = await client
        .from("SUPABASETESTE")
        .select("*")
        .order("id", { ascending: false });

      if (error) {
        console.error("Erro ao carregar usuários:", error);
        alert("Erro ao carregar. Verifique o console.");
        return;
      }

      data.forEach(usuario => {
        const item = document.createElement("li");
        item.textContent = `${usuario.nome} - ${usuario.email}`;
        lista.appendChild(item);
      });
    }
  </script>
</body>
</html>
